{
  "version": "1.0",
  "about": {
    "version": "2020.01.28.01-redis",
    "description": "An example stack"
  },
  "tests": [],
  "services": {
    "loadbalancer": null,
    "vpn": null
  },
  "containers": {
    "redis": {
      "name": "redis",
      "image": {
        "name": "redis",
        "source": {
          "docker_hub": {
            "target": "redis:latest",
            "username": ""
          }
        }
      },
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis",
          "ports": ["6379:6379"]
        },
        "deploy": {
          "instances": 1,
          "strategy": "first-available",
          "stateful": null,
          "constraints": {
            "node": {
              "tags": {
                "any": ["packet"],
                "all": ["packet", "packet-sjc1"]
              }
            },
            "containers": ["web"]
          },
          "shutdown": {
            "graceful_timeout": 30,
            "signals": [
              "SIGINT"
            ]
          },
          "startup": {
            "delay": null,
            "order": 1
          },
          "restart": {
            "condition": "always",
            "delay": 5,
            "max_attempts": 5,
            "notify": {
              "emails": ["it_director@yourcompany.com", "youremail@yourcompany.com"],
              "webhook": "http://endpoint.tohit.ifrestart"
            }
          },
          "health_check": {
            "command": "redis-server",
            "retries": 3,
            "interval": 20,
            "timeout": 30,
            "restart": true
          },
          "update": {
            "parallelism": 1,
            "delay": 1
          }
        },
        "scaling": null,
        "runtime": {
          "command": null,
          "namespaces": null,
          "environment_vars": {
            "TEST_VAR": "test_vaar_one"
          },
          "privileged": false,
          "capabilities": null,
          "workdir": null
        },
        "resources": {
          "cpu": {
            "shares": {
              "limit": null,
              "reserve": 1
            },
            "cpus": null
          },
          "ram": {
            "limit": null,
            "reserve": "10M",
            "swapiness": null,
            "kernel": "100K",
            "kernel_tcp": "100K"
          }
        },
        "integrations": null
      },
      "volumes": []
    },
    "web": {
      "name": "web",
      "image": {
        "name": "node",
        "source": {
          "docker_file": {
            "dir": "/",
            "build_file": "/Dockerfile"
          }
        }
      },
      "config": {
        "network": {
          "public": "enable",
          "hostname": "web",
          "ports": ["80:8081"]
        },
        "deploy": {
          "instances": 1,
          "strategy": "first-available",
          "stateful": null,
          "constraints": null,
          "shutdown": {
            "graceful_timeout": 30,
            "signals": ["SIGINT"]
          },
          "startup": {
            "delay": 0,
            "order": 2
          },
          "restart": {
            "condition": "always",
            "delay": 5,
            "max_attempts": 7,
            "notify": {
              "emails": ["me@mycompany.com"]
            }
          },
          "health_check": {
            "command": "npm start",
            "retries": 3,
            "interval": 10,
            "timeout": 30,
            "restart": true
          },
          "update": {
            "parallelism": 1,
            "delay": 1
          }
        },
        "scaling": null,
        "runtime": {
          "command": null,
          "namespaces": null,
          "environment_vars": {
            "TEST_VAR": "test_var"
          },
          "privileged": false,
          "capabilities": null,
          "workdir": null
        },
        "resources": {
          "cpu": {
            "shares": {
              "limit": null,
              "reserve": 1
            },
            "cpus": null
          },
          "ram": {
            "limit": null,
            "reserve": "1M",
            "swapiness": null,
            "kernel": "100K",
            "kernel_tcp": "100K"
          }
        },
        "integrations": null
      },
      "volumes": []
    }
  },
  "annotations": {}
}
  

